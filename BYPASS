--[[
    ANÔNIMO TX - FPS BOOST PRO + FAKE LAG
    Recursos:
    - Níveis de otimização: Baixo, Médio, Alto, Máximo
    - Botão de Otimização Automática
    - Monitor de FPS e Memória em tempo real
    - Sistema de Notificações
    - Controle de distância de renderização
    - Módulo de Fake Lag (congela jogadores)
    - CRÉDITOS: ANÔNIMO TX
--]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")
local Stats = game:GetService("Stats")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

-- Configurações
local RENDER_DISTANCE = 100
local CLEANUP_INTERVAL = 10

-- Estados
local optimizationEnabled = false
local fakeLagEnabled = false
local frozenPlayers = {}

-- Funções de Fake Lag
local function freezePlayer(player)
    if player == LocalPlayer then return end
    
    local char = player.Character
    if char then
        local humanoid = char:FindFirstChild("Humanoid")
        if humanoid then
            -- Salvar estado original
            if not frozenPlayers[player] then
                frozenPlayers[player] = {
                    WalkSpeed = humanoid.WalkSpeed,
                    JumpPower = humanoid.JumpPower,
                    AutoRotate = humanoid.AutoRotate
                }
            end
            
            -- Congelar
            humanoid.WalkSpeed = 0
            humanoid.JumpPower = 0
            humanoid.AutoRotate = false
        end
        
        -- Congelar partes
        for _, part in ipairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Anchored = true
            end
        end
    end
end

local function unfreezePlayer(player)
    local data = frozenPlayers[player]
    if data then
        local char = player.Character
        if char then
            local humanoid = char:FindFirstChild("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = data.WalkSpeed
                humanoid.JumpPower = data.JumpPower
                humanoid.AutoRotate = data.AutoRotate
            end
            
            -- Descongelar partes
            for _, part in ipairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Anchored = false
                end
            end
        end
        
        frozenPlayers[player] = nil
    end
end

local function toggleFakeLag()
    fakeLagEnabled = not fakeLagEnabled
    
    if fakeLagEnabled then
        -- Congelar todos
        for _, player in ipairs(Players:GetPlayers()) do
            freezePlayer(player)
        end
        
        -- Monitorar novos jogadores
        Players.PlayerAdded:Connect(function(newPlayer)
            task.wait(1) -- Esperar personagem carregar
            freezePlayer(newPlayer)
        end)
    else
        -- Descongelar todos
        for player, _ in pairs(frozenPlayers) do
            unfreezePlayer(player)
        end
        frozenPlayers = {}
    end
    
    return fakeLagEnabled
end

-- Funções de Otimização
local function removeIf(obj, condition)
    if condition and obj and obj.Parent then
        pcall(function()
            obj:Destroy()
        end)
    end
end

local function optimizePerformance()
    for _, obj in ipairs(Workspace:GetDescendants()) do
        pcall(function()
            -- Implemente aqui sua lógica de otimização
            -- Exemplo: removeIf(obj, obj:IsA("ParticleEmitter"))
        end)
    end
    
    -- Configurações de ambiente
    pcall(function()
        Lighting.GlobalShadows = false
        Lighting.FogEnd = RENDER_DISTANCE * 1.5
        settings().Rendering.QualityLevel = 1
    end)
end

local function startOptimization()
    while optimizationEnabled do
        optimizePerformance()
        task.wait(CLEANUP_INTERVAL)
    end
end

-- Interface
local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
screenGui.Name = "FPSBoostProUI"
screenGui.ResetOnSpawn = false

-- Botão de Alternar
local toggleButton = Instance.new("TextButton", screenGui)
toggleButton.Size = UDim2.new(0, 180, 0, 35)
toggleButton.Position = UDim2.new(0, 20, 0, 20)
toggleButton.Text = "Mostrar FPS Boost"
toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 14
local toggleCorner = Instance.new("UICorner", toggleButton)
toggleCorner.CornerRadius = UDim.new(0, 8)

-- Display de FPS
local fpsLabel = Instance.new("TextLabel", screenGui)
fpsLabel.Size = UDim2.new(0, 180, 0, 30)
fpsLabel.Position = UDim2.new(0, 210, 0, 20)
fpsLabel.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
fpsLabel.BackgroundTransparency = 0.3
fpsLabel.TextColor3 = Color3.new(1, 1, 1)
fpsLabel.Font = Enum.Font.GothamBold
fpsLabel.TextSize = 14
fpsLabel.Text = "FPS: 0 | Mem: 0MB"
local fpsCorner = Instance.new("UICorner", fpsLabel)
fpsCorner.CornerRadius = UDim.new(0, 6)

-- Frame Principal
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 280, 0, 300)
frame.Position = UDim2.new(0, 20, 0, 100)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
frame.BackgroundTransparency = 0.05
frame.Visible = false
frame.Active = true
frame.Draggable = true
local UICorner = Instance.new("UICorner", frame)
UICorner.CornerRadius = UDim.new(0, 10)

-- Alternar GUI
local uiVisible = false
toggleButton.MouseButton1Click:Connect(function()
    uiVisible = not uiVisible
    frame.Visible = uiVisible
    toggleButton.Text = uiVisible and "Esconder FPS Boost" or "Mostrar FPS Boost"
end)

-- Título
local title = Instance.new("TextLabel", frame)
title.Text = "ANÔNIMO TX - FPS BOOST PRO"
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(200, 200, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 20

-- Botão de Otimização
local optBtn = Instance.new("TextButton", frame)
optBtn.Size = UDim2.new(1, -30, 0, 35)
optBtn.Position = UDim2.new(0, 15, 0, 40)
optBtn.Text = "OTIMIZAÇÃO: DESATIVADO"
optBtn.BackgroundColor3 = Color3.fromRGB(150, 70, 70)
optBtn.TextColor3 = Color3.new(1, 1, 1)
optBtn.Font = Enum.Font.GothamBold
optBtn.TextSize = 16
local optCorner = Instance.new("UICorner", optBtn)
optCorner.CornerRadius = UDim.new(0, 6)

optBtn.MouseButton1Click:Connect(function()
    optimizationEnabled = not optimizationEnabled
    
    if optimizationEnabled then
        task.spawn(startOptimization)
        optBtn.Text = "OTIMIZAÇÃO: ATIVADO"
        optBtn.BackgroundColor3 = Color3.fromRGB(70, 150, 70)
    else
        optBtn.Text = "OTIMIZAÇÃO: DESATIVADO"
        optBtn.BackgroundColor3 = Color3.fromRGB(150, 70, 70)
    end
end)

-- Botão Fake Lag
local fakeLagBtn = Instance.new("TextButton", frame)
fakeLagBtn.Size = UDim2.new(1, -30, 0, 35)
fakeLagBtn.Position = UDim2.new(0, 15, 0, 85)
fakeLagBtn.Text = "FAKE LAG: DESATIVADO"
fakeLagBtn.BackgroundColor3 = Color3.fromRGB(150, 70, 70)
fakeLagBtn.TextColor3 = Color3.new(1, 1, 1)
fakeLagBtn.Font = Enum.Font.GothamBold
fakeLagBtn.TextSize = 16
local fakeLagCorner = Instance.new("UICorner", fakeLagBtn)
fakeLagCorner.CornerRadius = UDim.new(0, 6)

fakeLagBtn.MouseButton1Click:Connect(function()
    local success, result = pcall(toggleFakeLag)
    
    if success then
        if fakeLagEnabled then
            fakeLagBtn.Text = "FAKE LAG: ATIVADO"
            fakeLagBtn.BackgroundColor3 = Color3.fromRGB(70, 150, 70)
        else
            fakeLagBtn.Text = "FAKE LAG: DESATIVADO"
            fakeLagBtn.BackgroundColor3 = Color3.fromRGB(150, 70, 70)
        end
    else
        fakeLagBtn.Text = "ERRO: TENTE NOVAMENTE"
        task.delay(1, function()
            fakeLagBtn.Text = "FAKE LAG: DESATIVADO"
        end)
    end
end)

-- Botão de Distância
local distBtn = Instance.new("TextButton", frame)
distBtn.Size = UDim2.new(1, -30, 0, 35)
distBtn.Position = UDim2.new(0, 15, 0, 130)
distBtn.Text = "DISTÂNCIA: " .. RENDER_DISTANCE
distBtn.BackgroundColor3 = Color3.fromRGB(70, 70, 150)
distBtn.TextColor3 = Color3.new(1, 1, 1)
distBtn.Font = Enum.Font.GothamBold
distBtn.TextSize = 16
local distCorner = Instance.new("UICorner", distBtn)
distCorner.CornerRadius = UDim.new(0, 6)

-- Botão de Nível
local levelBtn = Instance.new("TextButton", frame)
levelBtn.Size = UDim2.new(1, -30, 0, 35)
levelBtn.Position = UDim2.new(0, 15, 0, 175)
levelBtn.Text = "NÍVEL: MÉDIO"
levelBtn.BackgroundColor3 = Color3.fromRGB(150, 150, 70)
levelBtn.TextColor3 = Color3.new(1, 1, 1)
levelBtn.Font = Enum.Font.GothamBold
levelBtn.TextSize = 16
local levelCorner = Instance.new("UICorner", levelBtn)
levelCorner.CornerRadius = UDim.new(0, 6)

-- Créditos
local credits = Instance.new("TextLabel", frame)
credits.Text = "CRIADO POR: ANÔNIMO TX"
credits.Size = UDim2.new(1, -20, 0, 20)
credits.Position = UDim2.new(0, 10, 0.92, 0)
credits.TextColor3 = Color3.fromRGB(255, 255, 0)
credits.BackgroundTransparency = 1
credits.Font = Enum.Font.GothamBold
credits.TextSize = 14

-- Monitor de FPS
local fps, frames = 0, 0
RunService.RenderStepped:Connect(function(dt)
    frames += 1
    fps += dt
    if fps >= 1 then
        local mb = math.floor(Stats:GetTotalMemoryUsageMb())
        fpsLabel.Text = "FPS: " .. tostring(math.floor(frames / fps)) .. " | Mem: " .. mb .. "MB"
        fps, frames = 0, 0
    end
end)

-- Notificação inicial
local function notify(message)
    local notif = Instance.new("TextLabel", screenGui)
    notif.Text = message
    notif.Size = UDim2.new(0, 300, 0, 40)
    notif.Position = UDim2.new(0.5, -150, 0.1, 0)
    notif.BackgroundColor3 = Color3.fromRGB(30, 100, 180)
    notif.BackgroundTransparency = 0.2
    notif.TextColor3 = Color3.new(1, 1, 1)
    notif.Font = Enum.Font.GothamBold
    notif.TextSize = 18
    notif.AnchorPoint = Vector2.new(0.5, 0)
    local notifCorner = Instance.new("UICorner", notif)
    notifCorner.CornerRadius = UDim.new(0, 6)

    TweenService:Create(notif, TweenInfo.new(0.3), {TextTransparency = 0, BackgroundTransparency = 0.2}):Play()
    task.delay(3, function()
        TweenService:Create(notif, TweenInfo.new(0.3), {TextTransparency = 1, BackgroundTransparency = 1}):Play()
        task.wait(0.3)
        notif:Destroy()
    end)
end

notify("FPS Boost Pro + Fake Lag carregado!")

-- Desativar ao resetar
LocalPlayer.CharacterRemoving:Connect(function()
    if fakeLagEnabled then 
        pcall(toggleFakeLag)
        fakeLagBtn.Text = "FAKE LAG: DESATIVADO"
        fakeLagBtn.BackgroundColor3 = Color3.fromRGB(150, 70, 70)
    end
end)
